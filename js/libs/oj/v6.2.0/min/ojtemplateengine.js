/**
 * @license
 * Copyright (c) 2014, 2019, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
define(["knockout","ojs/ojcore","ojs/ojkoshared","ojs/ojhtmlutils","ojs/ojlogger"],function(t,e,n,r,o){return new function(){this.execute=function(e,n,r,o){var i=u(n),a=n.getAttribute("data-oj-as");return t.applyBindingsToDescendants(l(e,n,r,o,a),i),Array.prototype.slice.call(i.childNodes,0)},this.clean=function(e){return t.cleanNode(e)},this.resolveProperties=function(r,o,s,c,d,f,p,v){var g=l(r,o,d,f,o.getAttribute("data-oj-as")),h=function(t,r,o,a,l){var s=i.get(t);if(!s){s={},i.set(t,s);var c=u(t),d=c.querySelector(o);s.evalMap=function(t,r,o){for(var i=new Map,a=t?t.attributes:[],u=0;u<a.length;u++){var l=a[u],s=e.__AttributeUtils.attributeToPropertyName(l.name),c=s.split(".");if(r.has(c[0])){var d=e.__AttributeUtils.getExpressionInfo(l.value),f=d.expr;f&&i.set(c,n.createBindingExpressionEvaluator(f,o))}}return i}(d,a,r),s.staticMap=function(t,e,n){var r={};if(t){var o=t.style;o.display="none",o.position="absolute",t.setAttribute("data-oj-binding-provider","none"),n.appendChild(t),e.forEach(function(e){void 0!==t[e]&&(r[e]=t[e])}),n.removeChild(t)}return r}(d,a,l)}return s}(o,g,s,c,v||r),b={};h.evalMap.forEach(function(e,n){var r=t.ignoreDependencies(a,null,[e,g]);p&&p(n,r),b[n[0]]=function(t,e,n){if(e.length<2)return n;for(var r=t[e[0]]||{},o=r,i=e.length-1,a=1;a<i;a++){var u=e[a],l=o[u]||{};o[u]=l,o=l}return o[e[i]]=n,r}(b,n,r)});var j=e.CollectionUtils.copyInto,m=j({},h.staticMap,null,!0);return m=j(m,b,null,!0)};var i=new WeakMap;function a(e,n){return t.utils.unwrapObservable(e(n))}function u(t){for(var e=document.createElement("div"),n=r.getTemplateContent(t),o=0;o<n.length;o++)e.appendChild(n[o]);return e}function l(e,r,i,a,u){var l=t.contextFor(r);return l||(o.info("Binding context not found when processing template for element with id: "+e.id+". Using binding context for element instead."),l=t.contextFor(e)),n.extendBindingContext(l,i,a,u,e)}}});